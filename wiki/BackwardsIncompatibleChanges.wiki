#summary Documentation for backwards-incompatible changes.
#labels Phase-Implementation,Phase-Support

= Backwards Incompatible Changes =

=== r284 (Dec 17, 2008) ===

Renamed some templates tags to don't overlap with other Django apps, like django-treemenus.

|| *old* || *new* ||
|| show_menu || pages_menu||
|| show_sub_menu || pages_sub_menu ||
|| show_admin_menu || pages_admin_menu ||

=== r261 (Dec 5, 2008) ===

The placeholder template tag doesn't return a `<div class="placeholder">[content]</div>` anymore. Please wrap the template tags yourself in HTML you require. The templates of the example project was changed to follow the changes.

=== r259 (Dec 5, 2008) ===

The placeholder template tag has been revamped to be a more flexible. The new syntax is a bit different and will break unless you change your existing templates.

The *old* syntax:

{{{
{% placeholder [name] [page] [widget] %}
}}}

The *new* syntax:

{{{
{% placeholder [name] %}
{% placeholder [name] parsed %}

{% placeholder [name] with [widget] %}
{% placeholder [name] with [widget] parsed %}

{% placeholder [name] on [page]  %}
{% placeholder [name] on [page] parsed %}
{% placeholder [name] on [page] with [widget] %}
{% placeholder [name] on [page] with [widget] parsed %}
}}}

The `page` and `widget` parameter are both optional now. If now `page` parameter is given it will automatically take the current page (by using the `current_page` context variable) to get the content of the placeholder.

*New:* If you pass the word "parsed" the content of the template will be evaluated as Django template code, within the current template context. Each placeholder with that has the "parsed" parameter will also have a note in the admin interface noting its ability to be evaluated as template.

*New:* You can now also use a variable name optionally that is automatically set in the context view with the content of the placeholder. The content will not be embedded in a `div` tag. 

{{{
{% placeholder right-column parsed as right_column %}

..random content..

<div class="my_funky_column">{{ right_column }}</div>
}}}

=== r252 (Nov 28, 2008) ===

The `mptt` app is now *required* to be added to the `INSTALLED_APPS` setting.
Just make sure your settings.py looks like that:

{{{
INSTALLED_APPS = (
    ...
    'mptt',
    'tagging',
    'pages',
)
}}}

=== r238 (Nov 26, 2008) ===

Removed `blank` and `null` options on the `sites` field of the `Page` model to enforce validation. That's now mandatory given the new `CurrentSiteMiddleware`. Change your site objects to match your domain(s)!

No worries if you use different subdomains on the same Django instance, pages checks if the request host ends with one of the Site instances.

=== r224 (Nov 23, 2008) ===

Moved [http://code.google.com/p/django-page-cms/source/browse/trunk#trunk/example example project] to its own subdirectory in the subversion root.

In case you updated from a previous version please make sure all remaining `*.pyc` files are deleted from your checkout before you run the example project again. On Linux/Unix systems that can be achieved by running the following command in the django-page-cms checkout directory:

{{{
find . -name '*.pyc' -exec rm {} \;
}}}

=== r222/r223 (Nov 23, 2008) ===

Added a !CurrentSiteMiddleware middleware that is now mandatory. This enables django-page-cms to serve multiple domains without having to have multiple Django processes.

Please modify your settings to look like this:

{{{
MIDDLEWARE_CLASSES = (
    # ..
    'pages.middleware.CurrentSiteMiddleware',
)
}}}

===  r207 (Nov 18, 2008) ===

Added new !DateTime field "publication_end_date" to Page model.

Use the following SQL statement as a helper if you need to modify existing data:

{{{
BEGIN;
ALTER TABLE pages_page
    ADD COLUMN publication_end_date datetime NULL;
COMMIT;
}}}